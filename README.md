# 메뉴 기반 콘솔 계산기

콘솔에서 사칙연산을 수행하고, 계산 결과를 리스트에 저장/조회/삭제할 수 있는 계산기 프로젝트입니다.
추가로, 기준 값을 입력받아 해당 값보다 큰 계산 결과들만 필터링해서 조회하는 기능을 구현했습니다.

---

## 구조 (UML 클래스 다이어그램)
![계산기 UML](img/계산기_Deploy.png)

---

## 기능

 - 사칙연산 계산 (+, -, *, /)
 - 계산 결과 저장 (List<Double>)
 - 계산 결과 목록 조회
 - 첫 번째 계산 결과 삭제
 - 기준 값보다 큰 계산 결과 목록 조회
 - 메뉴/연산자 Enum으로 관리 및 매핑
 - 제네릭과 함수형 인터페이스를 활용한 입력 예외 처리

---

## 메뉴

| 입력 | 메뉴                | 설명                                  |
|---:|-------------------|-------------------------------------|
|  1 | 계산하기              | 피연산자 2개 + 연산자를 입력받아 계산하고 결과 출력 및 저장 |
|  2 | 계산 결과 목록 조회       | 저장된 모든 계산 결과 목록을 조회                 |
|  3 | 첫 번째 계산 결과 삭제     | 리스트의 첫 번째(0) 결과 삭제 후 남은 목록 조회       |
|  4 | 입력 값보다 큰 계산 결과 조회 | 비교할 기준 값을 입력받아, 그보다 큰 저장된 결과 목록을 조회 |
|  0 | 종료                | 계산기 종료                              |

---

## 클래스 역할

| 클래스        | 역할                                                              |
|------------|-----------------------------------------------------------------|
| Main       | 전체 프로그램의 실행 흐름 및 메뉴 분기 처리(switch-case)                          |
| MenuMain   | 메뉴 UI 출력 및 메뉴 번호 입력 받아 반환                                       |
| InputUtils | Scanner 입력 래핑 / 제네릭 및 함수형 인터페이스(Function)를 이용한 입력 타입 변환 및 예외 처리 |
| Calculator | 계산 로직 수행 / 결과 저장(List) / 조회 / 삭제 / 필터링                          |
| InputMenu  | 메뉴 번호를 Enum으로 매핑하여 관리                                           |
| Operator   | 연산자(+, -, *, /)를 Enum으로 매핑 및 연산 로직(DoubleBinaryOperator) 포함     |

---

### 1) Calculator.calculate (제네릭 + Enum 사용)

 - \<T extends Number>로 피연사자를 받아 내부에서 double로 변환 후 연산을 수행합니다.
 - Operator Enum을 통해 연산자를 찾고(Optional), 연산 로직을 수행합니다.
 - 잘못된 연산자가 들어오거나 계산 중 오류가 발생하면 커스텀 예외(CalculateException, DivideException)를 발생시킵니다.

---

### 2) 계산 결과 저장 / 조회

 - 계산 결과는 List\<Double>에 누적 저장됩니다.
 - 결과 목록 조회 시 toString()을 통해 리스트 내용을 출력합니다.
 - 데이터 존재 여부는 isEmpty()를 통해 확인합니다.

---

### 3) 입력된 결과보다 큰 계산 결과만 필터링 (Stream API)

 - 사용자가 입력한 기준 값을 받아, 저장된 결과 리스트(result) 중 더 큰 값만 필터링합니다.
 - Java Stream API의 .filter()와 .mapToDouble()을 사용하여 조건에 맞는 값을 추출하고 double[] 배열로 반환합니다.

---

### 4) InputUtils (입력 예외 처리 공통화)

 - inputPrint(prompt, parser) 메서드를 통해 입력을 처리합니다.
 - 제네릭(\<T>)과 함수형 인터페이스(Function\<String, T>)를 활용하여, 정수(Integer::parseInt)나 문자(charAt) 등 다양한 타입을 유연하게 처리합니다.
 - 입력 형식이 맞지 않을 경우 try-catch로 잡아내어, 올바른 값이 입력될 때까지 재입력을 요청합니다.

---

### 예외 처리

| 상황                 | 처리 방식                                                           |
|--------------------|-----------------------------------------------------------------|
| 입력 타입 오류 (숫자/문자 등) | InputUtils에서 예외 포착 → "입력 형식이 잘못되었습니다." 출력 후 재입력 반복              |
| 존재하지 않는 메뉴 번호 입력   | NoSuchElementException 발생 → 메시지 출력 후 메뉴 다시 표시                   |
| 존재하지 않는 연산자 입력     | Operator 탐색 실패(Optional.empty) → CalculateException 발생 및 메시지 출력 |
| 나눗셈에서 분모가 0인 경우    | Operator 내부에서 DivideException 발생 → "분모가 0일 수 없습니다." 메시지 출력      |
| 결과 목록이 비어있는데 조회/삭제 | IsEmpty() 체크 → "현재 저장된 계산 결과가 없습니다." 메시지 출력                     |

---

## 실행 흐름

1. 메뉴 진입: MenuMain이 메뉴 텍스트를 출력하고 사용자로부터 번호를 입력받습니다.
2. 메뉴 매핑: 입력된 메뉴를 InputMenu Enum으로 변환합니다.
3. 기능 실행 (Main의 switch문)
   - 계산하기: InputUtils를 통해 숫자와 연산자를 입력받고, Calculator로 연산 수행 후 결과를 저장합니다.
   - 목록 조회: 저장된 리스트를 출력합니다.
   - 삭제: 가장 먼저 저장된 결과를 삭제하고 남은 목록을 보여줍니다.
   - 필터링 조회: 기준 값을 입력받아 그보다 큰 결과들만 배열로 받아 출력합니다.
4. 반복/종료: 0번(EXIT)을 선택하기 전까지 위 과정을 반복합니다.




